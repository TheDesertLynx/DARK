<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <script src="https://unpkg.com/dash@latest/dist/dash.min.js"></script> <!-- Correct Dash SDK URL -->
</head>
<body>
    <h1 id="title">Loading...</h1>
    <img id="image" alt="Image" width="200">
    <p id="text">Loading...</p>
    <!-- Remove or comment out the div if not using htmlContent for display -->
    <!-- <div id="htmlContent"></div> -->

    <script>
        function loadContent() {
            if (typeof Dash === 'undefined') {
                console.error('Dash SDK failed to load. Check network or extensions.');
                document.body.innerHTML = '<p>Error: Could not load Dash SDK. Try disabling browser extensions or checking your connection.</p>';
                return;
            }

            const client = new Dash.Client({
                network: 'testnet',
                apps: {
                    myContract: {
                        contractId: 'HnNVSS2byYwjH2BmoTLUJG94xtoDNihBBzWVvh8c5TGD', // Your contract ID
                    },
                },
            });

            const query = {
                where: [['$id', '==', '7zKXjwznWb1SefA5myoeUWDpeNg5vzCT3vrmrtk4RppN']], // Your document ID
            };

            client.platform.documents.get('myContract.page', query)
                .then(documents => {
                    if (documents.length > 0) {
                        const doc = documents[0].toJSON();
                        document.getElementById('title').innerText = doc.metadata?.title || 'DARK Project';
                        document.getElementById('image').src = doc.image || '';
                        document.getElementById('text').innerText = doc.text || 'No text available';
                        // Comment out or remove this line to avoid rendering the backup HTML
                        // document.getElementById('htmlContent').innerHTML = doc.htmlContent || '';
                    } else {
                        document.body.innerHTML = '<p>No content found.</p>';
                    }
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    document.body.innerHTML = '<p>Error loading content: ' + error.message + '</p>';
                });
        }

        // Call after page load to ensure SDK is ready
        window.addEventListener('load', loadContent);
    </script>
</body>
</html>
